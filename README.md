# Nginx

### Nginx란?

```properties
ℹ️ 초기에는 웹 서버로 주로 사용되었지만, 현재는 리버스 프록시 서버 및 HTTP 캐시로서도 널리 사용되고 있다.
```

- 기본적으로 설정 파일을 보면 Forward(순방향) Proxy 이다.
- Nginx 서버에서 Reverse Proxy 기능을 제공합니다.
- Nginx는 많은 양의 동시 접속을 처리할 수 있다
- CPU 및 메모리 사용이 적어 서버 리소스를 효율적으로 관리할 수 있습니다
- 활용 예시
  - 정적파일을 serving 하는 web server
  - 클라이언트를 요청을 대신해 목적 서버에 통신해주는 `proxy server`
  - 클라이언트의 요청을 다른 서버로 전달하는 `reverse proxy server` 로 활용되어 was 의 부하를 줄이는 로드 밸런서로 사용할 수도 있다.

### Apache 웹 서버 차이

| 측면      | Apache                                       | Nginx                                                               |
| --------- | -------------------------------------------- | ------------------------------------------------------------------- |
| 처리 모델 | 멀티 프로세스, 멀티 스레드 방식              | 이벤트 기반, 단일 또는 제한된 수의 프로세스 사용                    |
| 요청 처리 | 각 요청마다 새로운 스레드 또는 프로세스 생성 | 동시에 요청을 처리하여 효율적인 동시성 관리                         |
| 동시성    | 동시 접속에서 자원 소모가 큼                 | 효율적인 동시 처리로 자원 절약                                      |
| 자원 사용 | 높은 부하에서 CPU와 메모리 사용이 많음       | 효율적인 동시성으로 CPU와 메모리 절약                               |
| 적합성    | 전통적인 웹 애플리케이션에 적합              | 고트래픽 및 동시 접속이 많은 애플리케이션에 중간 로드 밸렁싱에 사용 |

### Nginx 디렉토리 구조

- `/etc/nginx`: 해당 디렉터리는 Nginx를 설정하는 디렉터리입니다.모든 설정을 이 디렉터리 안에서 합니다.
  - `/etc/nginx/nginx.conf`: Ngnix의 메인 설정 파일로서 전역 설정과 서버 블록을 포함할 수 있습니다.
- ✅ 아래의 설정들은 `nginx.conf`내 에서도 설정이 가능하다.
- `/etc/nginx/sites-available`: 해당 디렉터리에서 프록시 설정 및 어떻게 요청을 처리해야 할지에 대해 설정 할 수 있습니다.
- `/etc/nginx/sites-enabled`: 해당 디렉터리는 sites-available 디렉터리에서 연결된 파일들이 존재하는 곳 입니다.이 곳에 디렉터리와 연결이 되어 있어야 nginx가 프록시 설정을 적용합니다. [⭐️`available`에서 만든 사이트를 심볼릭 링크 필수]

#### `nginx.conf`에서 한번에 설정 장/단점

- 장점
  - 개별 사이트나 도메인의 설정을 별도로 관리할 수 있어 구조적이고 확장성이 높습니다.
  - 설정 파일을 추가하거나 제거할 때 NGINX 구성을 쉽게 관리할 수 있습니다.
  - 활성화/비활성화가 간단하여 테스트나 유지보수에 유리합니다.
- 단점
  - 디렉토리 형태가 아니기에 해당 설정 파일이 길어질 수 있다.
  - 서버가 복잡할 경우 전역적 설정파일 하나만으로 관리하기에는 오히려 불편해 질 수 있다.

### Prxoy란?

- "대리"라는 의미로 내부 네트워크에서 인터넷 접속 할때 빠른 엑세스나 안전한 통신들을 호가보하기 위한 중계를 의미한다.
- 클라이언트와 `Web` 또는 `WAS`의 중간에 위치하고 있으며 그 중간에서 요청을 받아 중간에도 통신을 해주는 역할을 해준다.

### Prxoy 종류

- `Forward Proxy`
  - 클라이언트의 요청을 `Proxy Server`가 받은 후 **지정 서버**에 요청 및 응답을 해주는 구성
- `Reverse Proxy`

  - 클라이언트의 요청을 `Reverse Proxy Server`가 설정한 로드 밸런싱 방식을 통해 지정한 **서버들**에게 분산하여 요청하는 형태

### 사용 방법

- Forard Proxy를 사용한 프록시 서버
  - [이동](https://github.com/edel1212/nginxStudy/tree/main/proxy)
- Reverse Proxy를 사용한 로드 밸런싱
  - [이동](https://github.com/edel1212/nginxStudy/tree/main/reverse-proxy)
- multiple-nginx-server를 사용한 다중 Nginx 서버
  - [이동](https://github.com/edel1212/nginxStudy/tree/main/multiple-nginx-server)


    
